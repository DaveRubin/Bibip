"use strict";angular.module("bibiApp",["ngCookies","ngResource","ngRoute","ngSanitize","ngTouch"]).config(["$routeProvider","$locationProvider",function(a,b){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl",controllerAs:"main"}).otherwise({redirectTo:"/"}),b.html5Mode({enabled:!0,requireBase:!1})}]),angular.module("bibiApp").controller("MainCtrl",["$scope","$window","$interval","$http",function(a,b,c,d){function e(){d.get(i).then(function(b){a.bibips<b.data.counter&&(a.bibips=b.data.counter),a.loaded||c(function(){a.loaded=!0},1500,1)})}function f(){p.x=b.innerWidth/2,p.y=b.innerHeight/2;var c=b.innerWidth<b.innerHeight;c!=a.mobile&&(a.mobile=c)}function g(){for(var a=0;a<7;a++){var b=document.createElement("audio");b.setAttribute("src","/sounds/bip"+a+".wav"),m.push(b)}}function h(){a.hairImage=1;var b=8,d=1,e=Math.floor(2*Math.random())+1;l=(l+e)%7+1,a.animating=!0,a.color="color"+l,null!=k&&c.cancel(k),k=c(function(){d!=b?(d++,a.hairImage=d>2?d%2+2:d):(a.animating=!1,a.color="")},100,b)}var i="http://bibipnetanyahu.org/server/api.php?endpoint=counter",j=0;a.loaded=!1,a.color="color1",a.mobile=!1,a.bibips=0,a.degree=0,a.eye={x:0,y:0},a.pressed=!1,a.animating=!1,a.hairImage=1,a.direction="right",c(function(){if(j>0){j=0;var a={i:j};$.post(i,a).done(function(a){})}},1500),c(e,3e3);var k,l=0,m=[],n=0,o=5,p={x:0,y:0},q={x:0,y:0};angular.element(b).bind("resize",function(){f()}),$("html").bind("touchmove",function(b){a.mobile&&(a.pressed||(a.OnMouseClick(!0),c(function(){a.OnMouseClick(!1)},700,1)),a.OnMouseMove(b.originalEvent.touches[0]))}),a.OnMouseMove=function(b){q.x=b.clientX-p.x,q.y=b.clientY-p.y;var c=-Math.atan2(q.x,q.y);a.degree=c/(Math.PI/180),a.eye.x=-Math.sin(c)*o,a.eye.y=Math.cos(c)*o*.7;var d=-22.5;c=a.degree+180,c>d+360||c<d+45?a.direction="down":c>d+45&&c<d+90?a.direction="down_left":c>d+90&&c<d+135?a.direction="right":c>d+135&&c<d+180?a.direction="top_left":c>d+180&&c<d+225?a.direction="top":c>d+225&&c<d+270?a.direction="top_right":c>d+270&&c<d+315?a.direction="left":c>d+315&&c<360&&(a.direction="down_right"),a.mobile&&!a.$$phase&&a.$digest()},a.OnMouseClick=function(b){a.pressed=b,b&&(a.bibips++,m[n].load(),n=Math.floor(Math.random()*m.length),m[n].play(),j++,h())},f(),g(),e()}]),angular.module("bibiApp").run(["$templateCache",function(a){a.put("views/main.html",'<div ng-show="loaded" class="hitZone" ng-class="mobile? \'mobile\':\'\' " ng-mousedown="OnMouseClick(true)" ng-mouseup="OnMouseClick(false)" ng-mousemove="OnMouseMove($event)"> <div class="mainText"></div> <div class="bibs-base"> <div class="bibs-eyes"> <div class="bibs-eye left"> <div class="eye-image" style="top:{{eye.y}}px;left:{{eye.x}}px"></div> </div> <div class="bibs-eye right"> <div class="eye-image" style="top:{{eye.y}}px;left:{{eye.x}}px"></div> </div> </div> <div class="bibs-body" ng-class="pressed? \'closed\':\'\'"> <div class="hair"> <img class="idle" ng-show="!animating" src="/images/bibi/bibi master hair.png"> <img ng-class="color" class="animating sides" ng-show="animating" src="/images/bibi/hair top layrs.png"> <img ng-class="color" class="animating down" ng-show="animating && direction == \'down\' " src="/images/down/{{hairImage}}.png"> <img ng-class="color" class="animating down_left" ng-show="animating && direction == \'down_left\' " src="/images/down_left/{{hairImage}}.png"> <img ng-class="color" class="animating down_right" ng-show="animating && direction == \'down_right\' " src="/images/down_right/{{hairImage}}.png"> <img ng-class="color" class="animating left" ng-show="animating && direction == \'left\' " src="/images/left/{{hairImage}}.png"> <img ng-class="color" class="animating right" ng-show="animating && direction == \'right\' " src="/images/right/{{hairImage}}.png"> <img ng-class="color" class="animating top" ng-show="animating && direction == \'top\' " src="/images/top/{{hairImage}}.png"> <img ng-class="color" class="animating top_right" ng-show="animating && direction == \'top_right\' " src="/images/top_right/{{hairImage}}.png"> <img ng-class="color" class="animating top_left" ng-show="animating && direction == \'top_left\' " src="/images/top_left/{{hairImage}}.png"> </div> </div> </div> <div class="rotatinObject" style="-webkit-transform: rotate({{degree}}deg);\n              transform: rotate({{degree}}deg);\n              -ms-transform: rotate({{degree}}deg)"> <div class="innerObject" ng-class="pressed?\'pressed\': \'\'"></div> </div> <div class="info"> <div class="social"> <a onclick="ga(&quot;send&quot;, &quot;event&quot;,&quot;Share&quot;, &quot;Facebook&quot;)" target="_blank" href="https://www.facebook.com/dialog/feed?app_id=184683071273&link=http%3A%2F%2Fbibipnetanyahu.org%2F&picture=http%3A%2F%2Fbibipnetanyahu.org%2Fimages%2Ffb_share.jpg&name=Bibipnetanyahu.org&caption=%20&description=%20%D7%A6%D7%A4%D7%A6%D7%A4%D7%95%20%D7%95%D7%A2%D7%96%D7%A8%D7%95%20%D7%9C%D7%91%D7%99%D7%91%D7%99%20%D7%9C%D7%9E%D7%A6%D7%95%D7%90%20%D7%90%D7%AA%20%D7%94%D7%9C%D7%95%D7%A7%20%D7%94%D7%97%D7%93%D7%A9%20%20%23%D7%91%D7%99%D7%91%D7%99%D7%A4%D7%A0%D7%AA%D7%A0%D7%99%D7%94%D7%95%20%2C%20%20bibipnetanyahu%23&redirect_uri=http%3A%2F%2Fwww.facebook.com%2F"><img src="/images/social_fb.png"></a> <a onclick="ga(&quot;send&quot;, &quot;event&quot;,&quot;Share&quot;, &quot;Whatsapp&quot;)" target="_blank" href="/images/instagram_share.jpg"><img src="/images/social_insta.png"></a> <a onclick="ga(&quot;send&quot;, &quot;event&quot;,&quot;Share&quot;, &quot;Twitter&quot;)" target="_blank" href="http://twitter.com/intent/tweet?text=%D7%9E%D7%A6%D7%A4%D7%A6%D7%A4%D7%99%D7%9D%20%D7%95%D7%91%D7%95%D7%97%D7%A8%D7%99%D7%9D%20%D7%9C%D7%91%D7%99%D7%91%D7%99%20%D7%90%D7%AA%20%D7%94%D7%9C%D7%95%D7%A7%20%D7%94%D7%97%D7%93%D7%A9%20http%3A%2F%2Fbibipnetanyahu.org%2F"><img src="/images/social_twitter.png"></a> <a onclick="ga(&quot;send&quot;, &quot;event&quot;,&quot;Share&quot;, &quot;Instergram&quot;)" href="whatsapp://send?text=מצפצפים ובוחרים לביבי את הלוק החדש http://bibipnetanyahu.org/"><img src="/images/social_whatsapp.png"></a> </div> <div class="counter"> <p class="numbers">{{bibips| number}}</p> <p class="bibips">BIBIPS</p> <p class="brought-by">BROUGHT TO YOU BY <a onclick="ga(&quot;send&quot;, &quot;event&quot;,&quot;Click&quot;, &quot;Ng-pr&quot;)" href="http://www.ng-pr.co.il" target="_blank">NG-PR</a></p> </div> </div> </div> <div ng-hide="loaded" class="hitZone loading"> <p class="loading-text">בטעינה</p> </div>')}]);